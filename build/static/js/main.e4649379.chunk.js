(this["webpackJsonpelectron-editor"]=this["webpackJsonpelectron-editor"]||[]).push([[0],{11:function(e,t,i){e.exports=i(17)},16:function(e,t,i){},17:function(e,t,i){"use strict";i.r(t);var a=i(1),n=i(2),s=i(4),o=i(3),c=i(5),r=i(0),l=i.n(r),h=i(8),u=i.n(h),f=(i(16),i(9)),d=i.n(f);function y(e,t){var i=t.offset;return{x:(e.x-i.x-v(e.x-i.x,t.size))/t.size,y:(e.y-i.y-v(e.y-i.y,t.size))/t.size}}function v(e,t){return(e%t+t)%t}function m(e,t){return{x:e.x-t.offset.x,y:e.y-t.offset.y}}var g=function(){function e(t,i,n){Object(a.a)(this,e),this.sprite=t,this.x=i,this.y=n}return Object(n.a)(e,[{key:"destroy",value:function(){this.delete=!0}},{key:"render",value:function(t){var i=t.container.canvas.getContext("2d"),a=t.grid,n=a.offset;e.isTileOnScreen(this.x,this.y,t)&&i.drawImage(this.sprite,n.x+this.x*a.size,n.y+this.y*a.size,a.size,a.size)}}],[{key:"isTileOnScreen",value:function(e,t,i){var a={x:0,y:0},n={x:i.container.width,y:i.container.height};return a=y(a,i.grid),n=y(n,i.grid),a.x+=-1,a.y+=-1,n.x-=-1,n.y-=-1,!(e<a.x||e>n.x||t<a.y||t>n.y)}}]),e}(),p=function(e){function t(e,i){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,null,e,i))).useDot=null,n.dotSize=null,n.crossSize=null,n.opacity=null,n.color=null,n}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(e){var t=e.container.canvas.getContext("2d"),i=e.grid,a=i.offset;g.isTileOnScreen(this.x,this.y,e)&&(this.useDot?(t.beginPath(),t.fillStyle=this.color,t.arc(a.x+this.x*i.size,a.y+this.y*i.size,i.size*this.dotSize/2,0,2*Math.PI,!1),t.globalAlpha=this.opacity,t.fill(),t.globalAlpha=1):(t.fillStyle=this.color,t.globalAlpha=this.opacity,t.fillRect(a.x+i.size*(this.x-.5),a.y+i.size*(this.y-.5+(.5-this.crossSize/2)),i.size,i.size*this.crossSize),t.fillRect(a.x+i.size*(this.x-.5+(.5-this.crossSize/2)),a.y+i.size*(this.y-.5),i.size*this.crossSize,i.size*(.5-.5*this.crossSize)),t.fillRect(a.x+i.size*(this.x-.5+(.5-this.crossSize/2)),a.y+i.size*(this.y+.5*this.crossSize),i.size*this.crossSize,i.size*(.5-.5*this.crossSize)),t.globalAlpha=1))}}]),t}(g),k=function(){function e(t,i,n){Object(a.a)(this,e),this.name=t,this.width=i,this.height=n,this.layout=e.initLayout(i,n),this.active=!0}return Object(n.a)(e,[{key:"setAt",value:function(e,t,i){this.isMouseOnLayer(t,i)&&(this.layout[t][i]=e)}},{key:"getAt",value:function(e,t){return this.layout[e][t]}},{key:"eraseAt",value:function(e,t){this.isMouseOnLayer(e,t)&&null!==this.layout[e][t]&&(this.layout[e][t].destroy(),this.layout[e][t]=null)}},{key:"isMouseOnLayer",value:function(e,t){return e>=0&&t>=0&&e<this.width&&t<this.height}},{key:"destroy",value:function(){this.delete=!0}},{key:"render",value:function(e){for(var t=0;t<this.width;t++)for(var i=0;i<this.height;i++)null!==this.layout[t][i]&&this.layout[t][i].render(e)}}],[{key:"initLayout",value:function(e,t){var i;i=new Array(e);for(var a=0;a<i.length;a++){i[a]=new Array(t);for(var n=0;n<i[a].length;n++)i[a][n]=null}return i}},{key:"getActive",value:function(e){for(var t=0;t<e.length;t++)if(e[t].active)return e[t]}}]),e}(),x=function(e){function t(e,i){var n;return Object(a.a)(this,t),(n=Object(s.a)(this,Object(o.a)(t).call(this,"Grid",e+1,i+1))).active=!1,n.layout=t.initGrid(n.width,n.height),n.useDot=!1,n.color="grey",n.opacity=.4,n.dotSize=.12,n.crossSize=.05,n}return Object(c.a)(t,e),Object(n.a)(t,[{key:"useDot",set:function(e){this.layout.forEach((function(t){t.forEach((function(t){t.useDot=e}))}))}},{key:"color",set:function(e){this.layout.forEach((function(t){t.forEach((function(t){t.color=e}))}))}},{key:"opacity",set:function(e){this.layout.forEach((function(t){t.forEach((function(t){t.opacity=e}))}))}},{key:"dotSize",set:function(e){this.layout.forEach((function(t){t.forEach((function(t){t.dotSize=e}))}))}},{key:"crossSize",set:function(e){this.layout.forEach((function(t){t.forEach((function(t){t.crossSize=e}))}))}}],[{key:"initGrid",value:function(e,t){var i;i=new Array(e);for(var a=0;a<i.length;a++){i[a]=new Array(t);for(var n=0;n<i[a].length;n++)i[a][n]=new p(a,n)}return i}}]),t}(k),b=i(10),z=function(){function e(){Object(a.a)(this,e)}return Object(n.a)(e,null,[{key:"getActive",value:function(e){for(var t=0,i=Object.entries(e);t<i.length;t++){var a=Object(b.a)(i[t],2)[1];if(a.active)return a}}}]),e}(),M=function(){function e(){Object(a.a)(this,e),this.active=!1,this.click={left:!1,middle:!1,right:!1},this.lastMouse={x:null,y:null},this.scrollSensivity=.1}return Object(n.a)(e,[{key:"onMouseDown",value:function(e){1===e.which?this.click.left=!0:2===e.which?this.click.middle=!0:3===e.which&&(this.click.right=!0),this.lastMouse={x:e.pageX,y:e.pageY}}},{key:"onMouseUp",value:function(e){1===e.which&&(this.click.left=!1),2===e.which&&(this.click.middle=!1),3===e.which&&(this.click.right=!1),this.lastMouse={x:e.pageX,y:e.pageY}}},{key:"onMouseMove",value:function(e,t,i){var a=t.grid,n=t.map,s=t.container,o=this.lastMouse;return this.click.middle?!(a.offset.x-(o.x-e.pageX)>s.width||a.offset.x-(o.x-e.pageX)<n.width*-a.size||a.offset.y-(o.y-e.pageY)>s.height||a.offset.y-(o.y-e.pageY)<n.height*-a.size)&&(a.offset.x-=o.x-e.pageX,a.offset.y-=o.y-e.pageY,this.lastMouse={x:e.pageX,y:e.pageY},i({grid:a}),!0):(this.click.left&&this.ative||this.click.right&&this.ative,!1)}},{key:"onMouseLeave",value:function(){this.click.left=!1,this.click.middle=!1,this.click.right=!1}},{key:"onWheel",value:function(e,t,i){var a=t.container,n=e.pageX,s=e.pageY,o=t.grid,c=o.offset,r=1-Math.sign(e.deltaY)*this.scrollSensivity,l=n-c.x-a.offset.x,h=s-c.y-a.offset.y,u=o.size;Math.round(o.size*r)<o.minSize?o.size=o.minSize:Math.round(o.size*r)>o.maxSize?o.size=o.maxSize:o.size=Math.round(o.size*r);var f=l*o.size/u,d=h*o.size/u;o.size;c.x+=Math.round(l-f),c.y+=Math.round(h-d),o.offset=c,i({grid:o})}}]),e}(),O=function(){function e(t,i){Object(a.a)(this,e),this.active=!1,this.size=t,this.sprite=i,this.click={left:!1,right:!1},this.lastMouse={x:null,y:null}}return Object(n.a)(e,[{key:"onMouseDown",value:function(e,t,i){var a=y(m({x:e.pageX,y:e.pageY},t.container),t.grid);1===e.which?(this.click.left=!0,this.placeAt(a,i)):3===e.which&&(this.click.right=!0,this.eraseAt(a,i)),this.lastMouse={x:e.pageX,y:e.pageY}}},{key:"onMouseUp",value:function(e){1===e.which&&(this.click.left=!1),3===e.which&&(this.click.right=!1)}},{key:"placeAt",value:function(e,t){k.getActive(t).setAt(new g(this.sprite,e.x,e.y),e.x,e.y)}},{key:"eraseAt",value:function(e,t){k.getActive(t).eraseAt(e.x,e.y)}},{key:"onMouseMove",value:function(e,t,i){var a=t.grid,n=y(m({x:e.pageX,y:e.pageY},t.container),a);return this.click.left?(this.makeLine(y(m(this.lastMouse,t.container),a),n,i,!0),this.lastMouse={x:e.pageX,y:e.pageY},!0):!!this.click.right&&(this.makeLine(y(m(this.lastMouse,t.container),a),n,i,!1),this.lastMouse={x:e.pageX,y:e.pageY},!0)}},{key:"onMouseLeave",value:function(){this.click.left=!1,this.click.right=!1}},{key:"makeLine",value:function(e,t,i,a){var n=t.x-e.x,s=t.y-e.y,o=Math.abs(n)+Math.abs(s);if(o<.5)a?this.placeAt({x:Math.floor(e.x),y:Math.floor(e.y)},i):this.eraseAt({x:Math.floor(e.x),y:Math.floor(e.y)},i);else for(var c,r,l=n/o,h=s/o,u=0;u<=Math.ceil(o);u++)c=Math.floor(e.x+l*u),r=Math.floor(e.y+h*u),a?this.placeAt({x:c,y:r},i):this.eraseAt({x:c,y:r},i)}}]),e}(),E=function(e){function t(e){var i;Object(a.a)(this,t),(i=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={container:{div:null,canvas:null,width:null,height:null,offset:{x:null,y:null}},grid:{size:50,minSize:3,maxSize:300,offset:{x:0,y:0}},map:{width:40,height:30},click:{left:!1,middle:!1,right:!1}},i.layers=[new x(i.state.map.width,i.state.map.height),new k("layer 1",i.state.map.width,i.state.map.height)];var n=new Image;return n.src=d.a,i.tools={brush:new O(2,n),camera:new M},i.tools.brush.active=!0,i}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this.refs.canvas;window.addEventListener("resize",this.handleResize.bind(this)),e.addEventListener("wheel",this.handleWheel.bind(this)),e.addEventListener("mousedown",this.handleMouseDown.bind(this)),e.addEventListener("mousemove",this.handleMouseMove.bind(this)),e.addEventListener("mouseup",this.handleMouseUp.bind(this)),e.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),document.oncontextmenu=function(){return!1};var t=this.state.container;t.canvas=e,t.div=this.refs.div,this.setState({container:t}),this.handleResize(),this.onStart()}},{key:"onStart",value:function(){var e=this.state.map,t=this.state.grid,i=this.refs.div;t.offset={x:Math.round(i.offsetWidth/2-e.width*this.state.grid.size/2),y:Math.round(i.offsetHeight/2-e.height*this.state.grid.size/2)},this.setState({grid:t})}},{key:"componentDidUpdate",value:function(){this.updateLayers()}},{key:"updateLayers",value:function(){var e=this.state.container;e.canvas.getContext("2d").clearRect(0,0,e.width,e.height);for(var t=0;t<this.layers.length;t++)this.layers[t].delete?this.layers.splice(t,1):this.layers[t].render(this.state)}},{key:"handleResize",value:function(){var e=this.refs.div,t=e.offsetWidth,i=e.offsetHeight,a={x:e.offsetLeft,y:e.offsetTop},n=this.state.container;n.width=t,n.height=i,n.offset=a,this.setState({container:n});var s=this.refs.canvas;s.width=t,s.height=i,this.updateLayers()}},{key:"handleWheel",value:function(e){this.tools.camera.onWheel(e,this.state,this.setState.bind(this)),this.updateLayers()}},{key:"handleMouseLeave",value:function(){z.getActive(this.tools).onMouseLeave(),this.tools.camera.onMouseLeave()}},{key:"handleMouseDown",value:function(e){z.getActive(this.tools).onMouseDown(e,this.state,this.layers),this.tools.camera.onMouseDown(e),this.updateLayers()}},{key:"handleMouseUp",value:function(e){z.getActive(this.tools).onMouseUp(e),this.tools.camera.onMouseUp(e)}},{key:"handleMouseMove",value:function(e){(z.getActive(this.tools).onMouseMove(e,this.state,this.layers)||this.tools.camera.onMouseMove(e,this.state,this.setState.bind(this)))&&this.updateLayers()}},{key:"render",value:function(){return l.a.createElement("div",{id:"EditingArea",ref:"div"},l.a.createElement("canvas",{ref:"canvas"}))}}]),t}(l.a.Component),j=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={name:"Information",title:"How to use",description:"Left Click : Place blocks / Right Click : Delete blocks / Middle Click : Pan the camera"},i}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"PanelArea"},l.a.createElement("div",{className:"header"},l.a.createElement("h1",null,this.state.name)),l.a.createElement("div",{className:"body"},l.a.createElement("h2",null,this.state.title),l.a.createElement("p",null,this.state.description)))}}]),t}(l.a.Component),w=i(6),S=i.n(w),A=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={title:"\u2022 This is a test.map"},i}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.refs.minimize.addEventListener("click",this.onMinimize),this.refs.maximize.addEventListener("click",this.onMaximize),this.refs.close.addEventListener("click",this.onClose)}},{key:"onMinimize",value:function(){}},{key:"onMaximize",value:function(){}},{key:"onClose",value:function(){}},{key:"render",value:function(){return l.a.createElement("div",{id:"TitleArea"},l.a.createElement("div",{className:"drag"}),l.a.createElement("p",{className:"title"},this.state.title),l.a.createElement("div",{className:"iconContainer"},l.a.createElement("img",{ref:"minimize",src:S.a,alt:""}),l.a.createElement("img",{ref:"maximize",src:S.a,alt:""}),l.a.createElement("img",{ref:"close",src:S.a,alt:""})))}}]),t}(l.a.Component),L=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={},i}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"ToolBarArea"},l.a.createElement(C,null),l.a.createElement(C,null),l.a.createElement(C,null),l.a.createElement(C,null),l.a.createElement(C,null),l.a.createElement(C,null),l.a.createElement(C,null),l.a.createElement(C,null))}}]),t}(l.a.Component),C=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={},i}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"TileButton"},l.a.createElement("button",null,"IMG"))}}]),t}(l.a.Component),D=L,Y=function(e){function t(e){var i;return Object(a.a)(this,t),(i=Object(s.a)(this,Object(o.a)(t).call(this,e))).state={},i}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"App"},l.a.createElement(E,null),l.a.createElement(A,null),l.a.createElement(D,null),l.a.createElement(j,null),l.a.createElement("div",{id:"StatusBarArea"}))}}]),t}(l.a.Component);u.a.render(l.a.createElement(Y,null),document.getElementById("root"))},6:function(e,t,i){e.exports=i.p+"static/media/cross.fcc611d3.svg"},9:function(e,t,i){e.exports=i.p+"static/media/test.7912874a.png"}},[[11,1,2]]]);
//# sourceMappingURL=main.e4649379.chunk.js.map